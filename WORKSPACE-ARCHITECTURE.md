# ğŸ—ï¸ Workspace System Architecture

Visual guide to understanding the multi-user workspace system architecture.

---

## ğŸ“Š System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     TaskFlow Application                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚   User A     â”‚  â”‚   User B     â”‚  â”‚   User C     â”‚      â”‚
â”‚  â”‚  (Owner)     â”‚  â”‚  (Admin)     â”‚  â”‚  (Member)    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                  â”‚                  â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                            â”‚                                  â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚                   â”‚   Workspace     â”‚                        â”‚
â”‚                   â”‚   "Team Alpha"  â”‚                        â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                            â”‚                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚         â”‚                  â”‚                  â”‚              â”‚
â”‚    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”‚
â”‚    â”‚  Tasks  â”‚       â”‚Categoriesâ”‚       â”‚  Notes  â”‚         â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Data Model

### Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User      â”‚
â”‚              â”‚
â”‚ - uid        â”‚
â”‚ - email      â”‚
â”‚ - name       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ userWorkspaces   â”‚
â”‚                  â”‚
â”‚ - userId         â”‚
â”‚ - workspaceId    â”‚â—„â”€â”€â”€â”€â”€â”
â”‚ - role           â”‚      â”‚
â”‚ - lastAccessed   â”‚      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                          â”‚
                          â”‚ N:1
                          â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                   â”‚  Workspace  â”‚
                   â”‚             â”‚
                   â”‚ - id        â”‚
                   â”‚ - name      â”‚
                   â”‚ - ownerId   â”‚
                   â”‚ - settings  â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â”‚ 1:N
                          â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                  â”‚                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   Tasks     â”‚    â”‚ Categories  â”‚    â”‚   Notes     â”‚
â”‚             â”‚    â”‚             â”‚    â”‚             â”‚
â”‚ - id        â”‚    â”‚ - id        â”‚    â”‚ - id        â”‚
â”‚ - workspace â”‚    â”‚ - workspace â”‚    â”‚ - workspace â”‚
â”‚ - createdBy â”‚    â”‚ - createdBy â”‚    â”‚ - createdBy â”‚
â”‚ - title     â”‚    â”‚ - name      â”‚    â”‚ - title     â”‚
â”‚ - status    â”‚    â”‚ - icon      â”‚    â”‚ - content   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ User Flow Diagrams

### Creating a Workspace

```
User Action                    System Response
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Click "Create Workspace"
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Show modal
    â”‚
Enter name & description
    â”‚
Click "Create"
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Create workspace doc
    â”‚                         Create member doc (owner)
    â”‚                         Create userWorkspace doc
    â”‚                         Create default categories
    â”‚
    â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Return workspace ID
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Switch to new workspace
    â”‚
    â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Load workspace data
    â”‚
Workspace ready! âœ“
```

### Inviting a Member

```
Owner/Admin                    System                    Invited User
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€                    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Click "Invite Member"
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Show invite modal
    â”‚
Enter email & role
    â”‚
Click "Send Invite"
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Create invite doc
    â”‚                         Generate token
    â”‚                         Set expiration (7 days)
    â”‚
    â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Return invite link
    â”‚
Copy & share link
    â”‚
    â”‚                                                     Click invite link
    â”‚                                                          â”‚
    â”‚                                                          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Verify token
    â”‚                                                          â”‚             Check expiration
    â”‚                                                          â”‚             Verify email
    â”‚                                                          â”‚
    â”‚                                                          â”‚             Create member doc
    â”‚                                                          â”‚             Create userWorkspace
    â”‚                                                          â”‚             Update invite status
    â”‚                                                          â”‚
    â”‚                                                          â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  Join workspace
    â”‚                                                          â”‚
    â”‚                                                     Member added! âœ“
```

### Real-Time Collaboration

```
User A                         Firestore                      User B
â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”€â”€â”€â”€â”€â”€

Create task
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Add task doc
    â”‚                             â”‚
    â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Listener triggered
    â”‚                             â”‚                             â”‚
    â”‚                             â”‚                             â”œâ”€â”€â–º Update local state
    â”‚                             â”‚                             â”‚
    â”‚                             â”‚                             â”œâ”€â”€â–º Re-render UI
    â”‚                             â”‚                             â”‚
    â”‚                             â”‚                        Task appears! âœ“
    â”‚
Move task to "In Progress"
    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Update task doc
    â”‚                             â”‚
    â”‚                             â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  Listener triggered
    â”‚                             â”‚                             â”‚
    â”‚                             â”‚                             â”œâ”€â”€â–º Update local state
    â”‚                             â”‚                             â”‚
    â”‚                             â”‚                             â”œâ”€â”€â–º Re-render UI
    â”‚                             â”‚                             â”‚
    â”‚                             â”‚                        Task moved! âœ“
```

---

## ğŸ” Permission Flow

### Permission Check Process

```
User Action
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check if logged in  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get current         â”‚
â”‚ workspace           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get user's role     â”‚
â”‚ in workspace        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check permission    â”‚
â”‚ for action          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
    â”‚           â”‚
    â–¼           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Allow  â”‚  â”‚ Deny   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Role-Based Access Matrix

```
Action                  â”‚ Owner â”‚ Admin â”‚ Member
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€
View workspace          â”‚   âœ“   â”‚   âœ“   â”‚   âœ“
Edit workspace settings â”‚   âœ“   â”‚   âœ—   â”‚   âœ—
Delete workspace        â”‚   âœ“   â”‚   âœ—   â”‚   âœ—
Invite members          â”‚   âœ“   â”‚   âœ“   â”‚   âœ—
Remove members          â”‚   âœ“   â”‚   âœ“*  â”‚   âœ—
Change roles            â”‚   âœ“   â”‚   âœ“*  â”‚   âœ—
Create tasks            â”‚   âœ“   â”‚   âœ“   â”‚   âœ“
Edit own tasks          â”‚   âœ“   â”‚   âœ“   â”‚   âœ“
Edit any task           â”‚   âœ“   â”‚   âœ“   â”‚   âœ—
Delete own tasks        â”‚   âœ“   â”‚   âœ“   â”‚   âœ“
Delete any task         â”‚   âœ“   â”‚   âœ“   â”‚   âœ—
Create categories       â”‚   âœ“   â”‚   âœ“   â”‚   âœ“
Edit categories         â”‚   âœ“   â”‚   âœ“   â”‚   âœ—
Delete categories       â”‚   âœ“   â”‚   âœ“   â”‚   âœ—
Create notes            â”‚   âœ“   â”‚   âœ“   â”‚   âœ“
Edit own notes          â”‚   âœ“   â”‚   âœ“   â”‚   âœ“
Edit any note           â”‚   âœ“   â”‚   âœ“   â”‚   âœ—
Leave workspace         â”‚   âœ—   â”‚   âœ“   â”‚   âœ“

* Cannot affect owner
```

---

## ğŸ”„ State Management

### Application State Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Application State                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  currentUser                                              â”‚
â”‚  â”œâ”€ uid                                                   â”‚
â”‚  â”œâ”€ email                                                 â”‚
â”‚  â””â”€ displayName                                           â”‚
â”‚                                                           â”‚
â”‚  currentWorkspace                                         â”‚
â”‚  â”œâ”€ id                                                    â”‚
â”‚  â”œâ”€ name                                                  â”‚
â”‚  â”œâ”€ description                                           â”‚
â”‚  â”œâ”€ ownerId                                               â”‚
â”‚  â””â”€ userRole (owner/admin/member)                        â”‚
â”‚                                                           â”‚
â”‚  userWorkspaces[]                                         â”‚
â”‚  â”œâ”€ [0] { workspaceId, role, workspace{...} }           â”‚
â”‚  â”œâ”€ [1] { workspaceId, role, workspace{...} }           â”‚
â”‚  â””â”€ [n] { workspaceId, role, workspace{...} }           â”‚
â”‚                                                           â”‚
â”‚  workspaceMembers[]                                       â”‚
â”‚  â”œâ”€ [0] { userId, email, role, displayName }            â”‚
â”‚  â”œâ”€ [1] { userId, email, role, displayName }            â”‚
â”‚  â””â”€ [n] { userId, email, role, displayName }            â”‚
â”‚                                                           â”‚
â”‚  tasks[]                                                  â”‚
â”‚  â”œâ”€ [0] { id, workspaceId, title, status, ... }         â”‚
â”‚  â””â”€ [n] { id, workspaceId, title, status, ... }         â”‚
â”‚                                                           â”‚
â”‚  categories[]                                             â”‚
â”‚  â”œâ”€ [0] { id, workspaceId, name, icon, ... }            â”‚
â”‚  â””â”€ [n] { id, workspaceId, name, icon, ... }            â”‚
â”‚                                                           â”‚
â”‚  notes[]                                                  â”‚
â”‚  â”œâ”€ [0] { id, workspaceId, title, content, ... }        â”‚
â”‚  â””â”€ [n] { id, workspaceId, title, content, ... }        â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Component Architecture

### UI Component Hierarchy

```
App
â”‚
â”œâ”€ Sidebar
â”‚  â”œâ”€ Workspace Selector
â”‚  â”‚  â”œâ”€ Current Workspace Display
â”‚  â”‚  â””â”€ Workspace Dropdown
â”‚  â”‚     â”œâ”€ Workspace List
â”‚  â”‚     â””â”€ Create Workspace Button
â”‚  â”‚
â”‚  â”œâ”€ Navigation
â”‚  â”‚  â”œâ”€ Dashboard
â”‚  â”‚  â”œâ”€ My Tasks
â”‚  â”‚  â”œâ”€ Calendar
â”‚  â”‚  â”œâ”€ Notes
â”‚  â”‚  â””â”€ Workspace Settings
â”‚  â”‚
â”‚  â””â”€ User Info
â”‚     â”œâ”€ Theme Toggle
â”‚     â”œâ”€ User Email
â”‚     â””â”€ Logout Button
â”‚
â”œâ”€ Main Content
â”‚  â”œâ”€ Top Bar
â”‚  â”‚  â”œâ”€ View Title
â”‚  â”‚  â”œâ”€ Member Count
â”‚  â”‚  â””â”€ Action Buttons
â”‚  â”‚
â”‚  â””â”€ View Container
â”‚     â”œâ”€ Dashboard View
â”‚     â”‚  â””â”€ Task Board
â”‚     â”‚     â”œâ”€ Category Columns
â”‚     â”‚     â””â”€ Task Cards
â”‚     â”‚
â”‚     â”œâ”€ My Tasks View
â”‚     â”‚  â”œâ”€ Filter Buttons
â”‚     â”‚  â””â”€ Task List
â”‚     â”‚
â”‚     â”œâ”€ Calendar View
â”‚     â”‚  â”œâ”€ Calendar Grid
â”‚     â”‚  â””â”€ Task Details
â”‚     â”‚
â”‚     â””â”€ Notes View
â”‚        â”œâ”€ View Toggle
â”‚        â””â”€ Notes Grid/List
â”‚
â””â”€ Modals
   â”œâ”€ Create Workspace Modal
   â”œâ”€ Workspace Settings Modal
   â”‚  â”œâ”€ General Tab
   â”‚  â”œâ”€ Members Tab
   â”‚  â””â”€ Invites Tab
   â”œâ”€ Invite Member Modal
   â”œâ”€ Task Modal
   â”œâ”€ Category Modal
   â””â”€ Note Modal
```

---

## ğŸ”Œ API Integration Points

### Firestore Operations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Firestore Database                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  Collections:                                             â”‚
â”‚                                                           â”‚
â”‚  workspaces/                                              â”‚
â”‚  â”œâ”€ {workspaceId}                                        â”‚
â”‚  â”‚  â”œâ”€ name                                              â”‚
â”‚  â”‚  â”œâ”€ description                                       â”‚
â”‚  â”‚  â”œâ”€ ownerId                                           â”‚
â”‚  â”‚  â””â”€ settings                                          â”‚
â”‚                                                           â”‚
â”‚  workspaceMembers/                                        â”‚
â”‚  â”œâ”€ {workspaceId}_{userId}                              â”‚
â”‚  â”‚  â”œâ”€ workspaceId                                       â”‚
â”‚  â”‚  â”œâ”€ userId                                            â”‚
â”‚  â”‚  â”œâ”€ role                                              â”‚
â”‚  â”‚  â””â”€ status                                            â”‚
â”‚                                                           â”‚
â”‚  workspaceInvites/                                        â”‚
â”‚  â”œâ”€ {inviteId}                                           â”‚
â”‚  â”‚  â”œâ”€ workspaceId                                       â”‚
â”‚  â”‚  â”œâ”€ invitedEmail                                      â”‚
â”‚  â”‚  â”œâ”€ inviteToken                                       â”‚
â”‚  â”‚  â”œâ”€ role                                              â”‚
â”‚  â”‚  â””â”€ status                                            â”‚
â”‚                                                           â”‚
â”‚  userWorkspaces/                                          â”‚
â”‚  â”œâ”€ {userId}_{workspaceId}                              â”‚
â”‚  â”‚  â”œâ”€ userId                                            â”‚
â”‚  â”‚  â”œâ”€ workspaceId                                       â”‚
â”‚  â”‚  â””â”€ role                                              â”‚
â”‚                                                           â”‚
â”‚  tasks/                                                   â”‚
â”‚  â”œâ”€ {taskId}                                             â”‚
â”‚  â”‚  â”œâ”€ workspaceId                                       â”‚
â”‚  â”‚  â”œâ”€ createdBy                                         â”‚
â”‚  â”‚  â””â”€ ...                                               â”‚
â”‚                                                           â”‚
â”‚  categories/                                              â”‚
â”‚  â”œâ”€ {categoryId}                                         â”‚
â”‚  â”‚  â”œâ”€ workspaceId                                       â”‚
â”‚  â”‚  â”œâ”€ createdBy                                         â”‚
â”‚  â”‚  â””â”€ ...                                               â”‚
â”‚                                                           â”‚
â”‚  notes/                                                   â”‚
â”‚  â”œâ”€ {noteId}                                             â”‚
â”‚  â”‚  â”œâ”€ workspaceId                                       â”‚
â”‚  â”‚  â”œâ”€ createdBy                                         â”‚
â”‚  â”‚  â””â”€ ...                                               â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Production                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚         Firebase Hosting                     â”‚        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚        â”‚
â”‚  â”‚  â”‚  Static Files                      â”‚     â”‚        â”‚
â”‚  â”‚  â”‚  - index.html                      â”‚     â”‚        â”‚
â”‚  â”‚  â”‚  - app.js                          â”‚     â”‚        â”‚
â”‚  â”‚  â”‚  - workspace.js                    â”‚     â”‚        â”‚
â”‚  â”‚  â”‚  - workspace-ui-controller.js      â”‚     â”‚        â”‚
â”‚  â”‚  â”‚  - styles.css                      â”‚     â”‚        â”‚
â”‚  â”‚  â”‚  - workspace-styles.css            â”‚     â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                        â”‚                                  â”‚
â”‚                        â”‚ HTTPS                            â”‚
â”‚                        â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚         Firebase Authentication              â”‚        â”‚
â”‚  â”‚  - Email/Password                            â”‚        â”‚
â”‚  â”‚  - Google OAuth                              â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                        â”‚                                  â”‚
â”‚                        â”‚ Authenticated                    â”‚
â”‚                        â–¼                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚         Firestore Database                   â”‚        â”‚
â”‚  â”‚  - Security Rules                            â”‚        â”‚
â”‚  â”‚  - Real-time Listeners                       â”‚        â”‚
â”‚  â”‚  - Indexed Queries                           â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Performance Considerations

### Query Optimization

```
Efficient Query Pattern:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Query tasks by workspaceId             â”‚
â”‚ â”œâ”€ Index: workspaceId                  â”‚
â”‚ â”œâ”€ Filter: where('workspaceId', '==') â”‚
â”‚ â””â”€ Result: Only workspace tasks        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Inefficient Pattern (Avoid):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Query all tasks, filter client-side    â”‚
â”‚ â”œâ”€ Fetch: All tasks                    â”‚
â”‚ â”œâ”€ Filter: tasks.filter(...)           â”‚
â”‚ â””â”€ Result: Wasted reads                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Real-Time Listener Strategy

```
Listener Lifecycle:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. User switches workspace             â”‚
â”‚    â”œâ”€ Unsubscribe old listeners        â”‚
â”‚    â””â”€ Clear old data                   â”‚
â”‚                                         â”‚
â”‚ 2. Setup new listeners                 â”‚
â”‚    â”œâ”€ Tasks listener                   â”‚
â”‚    â”œâ”€ Categories listener              â”‚
â”‚    â””â”€ Notes listener                   â”‚
â”‚                                         â”‚
â”‚ 3. Receive updates                     â”‚
â”‚    â”œâ”€ Document added                   â”‚
â”‚    â”œâ”€ Document modified                â”‚
â”‚    â””â”€ Document removed                 â”‚
â”‚                                         â”‚
â”‚ 4. Update UI                           â”‚
â”‚    â”œâ”€ Update local state               â”‚
â”‚    â””â”€ Re-render components             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ UI State Transitions

### Workspace Switching Animation

```
Current State          Transition          New State
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”€â”€â”€â”€â”€â”€â”€â”€â”€

Workspace A            Loading...          Workspace B
â”œâ”€ Tasks A             â”œâ”€ Fade out         â”œâ”€ Tasks B
â”œâ”€ Categories A        â”œâ”€ Unsubscribe      â”œâ”€ Categories B
â””â”€ Notes A             â”œâ”€ Load data        â””â”€ Notes B
                       â”œâ”€ Subscribe
                       â””â”€ Fade in
```

---

This architecture document provides a visual understanding of how the workspace system is structured and how data flows through the application.

For implementation details, see:
- `WORKSPACE-SYSTEM.md` - Complete documentation
- `WORKSPACE-MIGRATION.md` - Integration guide
- `WORKSPACE-INTEGRATION-CHECKLIST.md` - Step-by-step checklist
